path {
	"hash"			"#{digest}.#{extension}"
}

get "thumbnail" "v1" ":operation" ":width" ":height" ":options" {
	source_file "original" root="/tmp" path="hash"

	thumbnail "original" {
		"small" operation="#{operation}" width="#{width}" height="#{height}" options="#{options}" quality=84 format="jpeg"
	}

	output_image "small"
}


put "thumbnail" "v1" ":operation" ":width" ":height" ":options" {
	thumbnail "input" {
		"original" operation="#{operation}" width="#{width}" height="#{height}" options="#{options}" quality=84 format="jpeg"
	}

	store_file "original" root="/tmp" path="hash"

	output_image "original"
}

post {
}

